extends layout

block append css
  link(href='css/index.css', rel='stylesheet', media='screen')

block content
  .navbar.navbar-inverse.navbar-fixed-top
    .navbar-inner
      .container
        a.brand(href='./index.html') 鲸宝汽车网
        ul.nav
          li.active
            a(href='./index.html') 汽车频道
          li
            a(href='./shoplist.html') 4s店频道
          li
            a(href='./building.html') 移动应用
          li
            a(href='./building.html') 关于我们
        form.navbar-form.pull-right
          input.input-small(type='text', placeholder='用户名')
          input.input-small(type='password', placeholder='密码')
          input.btn(type='submit', value='登陆')
          a.btn(href='./register.html') 注册
  //
    header#overview.jumbotron.subhead
      .container
        h2(style='margin: 25px 0 0 0;') 网站广告位
  .container(style='padding: 45px 0;')
    //
      div(align='center')
        img(src='img/progress.png')
    .row-fluid
      .span8
        div(style="height: 10px;padding-top: 15px;") 
          ul.nav.nav-tabs(style="border-bottom:0px;")
            li(id="city")
              a(href="#")
                h4 城市
                h6 不限
            li(id="brand")
              a(href="#")
                h4 品牌
                h6 不限
            li(id="model")
              a(href="#") 
                h4 车型
                h6 不限
            li(id="price")
              a(href="#") 
                h4 价格
                h6 不限
      //
        ul.nav.nav-pills
          li.dropdown
            a#cityButton.dropdown-toggle(data-hover='dropdown', data-delay='300', data-toggle='dropdown', href='#')
              span#cityName 城市
              b.caret
            ul.dropdown-menu
              li
               a(onclick="$('#cityName').html('城市')", href="#") 不限
              each city in allDicCity
                li
                  a(href="#")= city.cityCname
          li.dropdown
            a.dropdown-toggle(data-hover='dropdown', data-delay='300', data-toggle='dropdown', href='#')
              span#brandValue 品牌
              b.caret
            ul.dropdown-menu
              li
                a(onclick="$('#brandValue').html('品牌')", href='#') 不限
              li
                a(onclick="$('#brandValue').html('大众')", href='#') 大众
          li.dropdown
            a.dropdown-toggle(data-hover='dropdown', data-delay='300', data-toggle='dropdown', href='#')
              | 车型
              b.caret
            ul.dropdown-menu
              li
                a(href='#') 不限
              li
                a(href='#') 捷达
              li
                a(href='#') 高尔夫
          li.dropdown
            a.dropdown-toggle(data-hover='dropdown', data-delay='300', data-toggle='dropdown', href='#')
              | 价格
              b.caret
            ul.dropdown-menu
              li
                a(href='#') 不限
              li
                a(href='#') 1万 ~ 5万
              li
                a(href='#') 5万 ~ 10万
              li
                a(href='#') 10万 ~ 20万
              li
                a(href='#') 20万 ~ 50万
              li
                a(href='#') 50万以上
      .span4
        .pagination.pagination-small.pagination-right(style='float:right;width:170px;margin: 20px 0 0 0;')
           span(style='float:left;height: 25px;padding:2px;') #{carModelViews.currentPage} / #{carModelViews.pageCount}
           ul
             if carModelViews.firstPage
               li.disabled
                 a(href='#') 前一页
             -else
               li
                 a(href='#',onclick="conditionSelect('pageIndex','#{carModelViews.currentPage - 1}',true)") 前一页
                 
             if carModelViews.lastPage
               li.disabled
                 a(href='#') 后一页
             -else
               li
                 a(href='#',onclick="conditionSelect('pageIndex','#{carModelViews.currentPage + 1}',true)") 后一页
    div(id="divHolder",style="display:none;height: 30px;")
      div(id="cityDiv",style="display:none;background-image: url(img/condition-bg.png);height: 20px;padding:5px;")
        a(href="#",onClick="conditionSelect('city','',true);return false;",style="color: #FFFFFF;padding-left: 7px;") 不限
        each city in allDicCity
          a(href="#",onClick="conditionSelect('city','#{city.id}',true);",style="color: #FFFFFF;padding-left: 7px;")= city.cityCname
      div(id="brandDiv",style="display:none;background-image: url(img/condition-bg.png);height: 20px;padding:5px;")
        a(href="#",style="color: #FFFFFF;padding-left: 7px;") 不限
        each brand in allBrand
         a(href="#",style="color: #FFFFFF;padding-left: 7px;")= brand.cname
      div(id="modelDiv",style="display:none;background-image: url(img/condition-bg.png);height: 20px;padding:5px;")
        a(href="#",style="color: #FFFFFF;padding-left: 7px;") 不限
      div(id="priceDiv",style="display:none;background-image: url(img/condition-bg.png);height: 20px;padding:5px;")
        a(href="#",style="color: #FFFFFF;padding-left: 7px;") 不限
        a(href="#",style="color: #FFFFFF;padding-left: 7px;") 1万 ~ 5万
        a(href="#",style="color: #FFFFFF;padding-left: 7px;") 5万 ~ 10万
        a(href="#",style="color: #FFFFFF;padding-left: 7px;") 10万 ~ 20万
        a(href="#",style="color: #FFFFFF;padding-left: 7px;") 20万 ~ 50万
        a(href="#",style="color: #FFFFFF;padding-left: 7px;") 5万以上
    hr(style='margin: 0px 0px 17px;')
    //列表 
    .row-fluid
      <ul class='thumbnails'> 
      each carModelView, i in carModelViews.items
        li.span3
          a.thumbnail(href='./carinfo.html', style='padding: 0px;')
            div(name='hoverdiv', style='height: 190px; width: 220px;')
              div(name='imgdiv', style='width: 200; position: absolute;')
                img(data-src='holder.js/210x140', alt='210x140', style='width: 210px; height: 150px;', src='img/suteng.jpg')
                .caption
                  h6.text-center 市场价:#{carModelView.factoryPriceMin}万 ～ #{carModelView.factoryPriceMax}万
                  h6.text-center 网站价:#{carModelView.shopPriceMin}万 ～ #{carModelView.shopPriceMax}万
              div(name='coverdiv', style='width: 200; position: absolute; display: none;')
                div(style='height: 110px; padding: 20px;')
                  strong #{carModelView.brandCname} #{carModelView.cname}
                  h6 1.4T 1.8T 2.0T
                  h6 横置前驱
                  h6 7档双离合
                .caption(style='background-image: url(img/hover-price.png); padding: 0px; width: 220px; border-radius: 0px 0px 4px 4px;')
                  h6.text-center(style='color: #ffffff;') 市场价:13.18万 ～ 22.58万
                  h6.text-center(style='color: #ffffff; border-radius: 4px 4px 4px 4px;') 网站价:12.18万 ～ 20.58万
          h5 #{carModelView.brandCname} #{carModelView.cname}
        if i != 0 && (i+1) % 4 == 0
          </ul><ul class='thumbnails'>
      </ul>
      
  form(action="/",method="get",id="conditionform")
    input(type="hidden",name="pageIndex",id="from_pageIndex",value="#{conditionParams.pageIndex}")
    input(type="hidden",name="carBrand",id="from_carBrand",value="#{conditionParams.carBrand}")
    input(type="hidden",name="carModelLv1",id="from_carModelLv1",value="#{conditionParams.carModelLv1}")
    input(type="hidden",name="priceMin",id="from_priceMin",value="#{conditionParams.priceMin}")
    input(type="hidden",name="priceMax",id="from_priceMax",value="#{conditionParams.priceMax}")
    input(type="hidden",name="city",id="from_city",value="#{conditionParams.city}")
        
  footer.footer
    .container
      p 杭州鲸硅科技有限公司出品
      
  script.
    //提交筛选事件
    function conditionSelect(type,value,needSubmit){
      $("#from_" + type).val(value);
      if(needSubmit == true){
        $("#conditionform").submit();
      }
    }
    
    //筛选条件选择效果
    var currentHoverBtn = null;
    var tabNames = ["city","brand","model","price"];
    function initEventForTabs(){
      for(i in tabNames){
        var name = tabNames[i];
        $("#" + name).hover(
          function(){
            currentHoverBtn = $(this).attr("id");
          },
          function(){
            currentHoverBtn = null;
          }
        );
      }
    }
    initEventForTabs();
    $(document).click(function(){
      //为了效果，如果需要显示菜单就用div撑住高度，避免页面乱动
      if(currentHoverBtn != null){
        //$("#divHolder").css({height:"30px",display:""});
        $("#divHolder").slideDown();
      }
      else{
        $("#divHolder").slideUp('slow');
      }

      //先隐藏
      for(i in tabNames){
        var name = tabNames[i];
        if(currentHoverBtn != name){
          $("#" + name).removeClass("active");
          $("#" + name + "Div").slideUp();
        }
      }
      
      //再显示
      for(i in tabNames){
        var name = tabNames[i];
        if(currentHoverBtn == name){
          $("#" + name).addClass("active");
          $("#" + name + "Div").slideDown();
        }
      }
    });
    
    //汽车图片浮动效果
    $("div[name='hoverdiv']").each(function(index,value){
      $(value).hover(function(){
        $(this).find("div[name='imgdiv']").fadeTo('slow',0.03);
        $(this).find("div[name='coverdiv']").fadeToggle('slow');
      },function(){
        $(this).find("div[name='imgdiv']").fadeTo('slow',1);
        $(this).find("div[name='coverdiv']").fadeToggle('slow');
      });
    });